summary(jamaica_stm)
jamaica_topics <- tidy(jamaica_stm, matrix="beta")
jamaica_top_terms <- jamaica_topics %>%
group_by(topic) %>%
slice_max(beta, n=10) %>%
ungroup() %>%
arrange(topic, -beta)
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered()
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
jamaica_dtm <- tidy_jamaica %>%
count(ID, word) %>%
filter(n>=3) %>%
cast_sparse(ID, word, n)
set.seed(123)
jamaica_stm <- stm(jamaica_dtm, K=6)
summary(jamaica_stm)
jamaica_topics <- tidy(jamaica_stm, matrix="beta")
jamaica_top_terms <- jamaica_topics %>%
group_by(topic) %>%
slice_max(beta, n=10) %>%
ungroup() %>%
arrange(topic, -beta)
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered() +
theme(text=element_text(size=10, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered() +
theme(text=element_text(size=16, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
jamaica_dtm <- tidy_jamaica %>%
count(ID, word) %>%
filter(n>=3) %>%
cast_sparse(ID, word, n)
set.seed(123)
jamaica_stm <- stm(jamaica_dtm, K=6)
summary(jamaica_stm)
jamaica_topics <- tidy(jamaica_stm, matrix="beta")
jamaica_top_terms <- jamaica_topics %>%
group_by(topic) %>%
slice_max(beta, n=10) %>%
ungroup() %>%
arrange(topic, -beta)
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=beta), size=3, hjust=-0.1, family="Courier") +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_y_continuous(expand=expansion(add=c(0, 0.2))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.2))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.05))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.01))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.02))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.025))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.025))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.025))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.02))) +
scale_y_reordered() +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=4, width=6)
jamaica_gamma <- tidy(jamaica_stm,
matrix="gamma",
document_names=rownames(jamaica_dfm))
p_gamma <- ggplot(jamaica_gamma, aes(gamma, fill=as.factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_histogram(show.legend=FALSE, color="black") +
facet_wrap(~topic, ncol=3) +
geom_text(stat="bin", aes(label=ifelse(after_stat(count)>0, after_stat(count), "")), size=3, vjust=-0.5, family="Courier") +
labs(y="# of interviews") +
scale_y_continuous(expand=expansion(add=c(0, 2))) +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma
ggsave(p_gamma, filename=file.path(output, paste0("p_gamma.svg")), height=4, width=6)
p_gamma_time <- jamaica_gamma %>%
left_join(relationship = "many-to-many", jamaica_df %>%
mutate(ID=as.character(ID)) %>%
select(Time_Bin, document=ID)) %>%
mutate(topic=factor(topic)) %>%
ggplot(aes(gamma, topic, fill=topic)) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_boxplot(alpha=0.7, show.legend=FALSE) +
facet_wrap(vars(Time_Bin)) +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma_time
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=4, width=6)
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=7)
ggsave(p_gamma, filename=file.path(output, paste0("p_gamma.svg")), height=5, width=7)
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=5, width=7)
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=5, width=8)
ggsave(p_gamma, filename=file.path(output, paste0("p_gamma.svg")), height=5, width=8)
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=8)
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=8.5)
jamaica_gamma <- tidy(jamaica_stm,
matrix="gamma",
document_names=rownames(jamaica_dfm))
p_gamma <- ggplot(jamaica_gamma, aes(gamma, fill=as.factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_histogram(show.legend=FALSE, color="black") +
facet_wrap(~topic, ncol=3) +
geom_text(stat="bin", aes(label=ifelse(after_stat(count)>0, after_stat(count), "")), size=3, vjust=-0.5, family="Courier") +
labs(y="# of interviews") +
scale_y_continuous(expand=expansion(add=c(0, 2))) +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma
ggsave(p_gamma, filename=file.path(output, paste0("p_gamma.svg")), height=5, width=8)
p_gamma_time <- jamaica_gamma %>%
left_join(relationship = "many-to-many", jamaica_df %>%
mutate(ID=as.character(ID)) %>%
select(Time_Bin, document=ID)) %>%
mutate(topic=factor(topic)) %>%
ggplot(aes(gamma, topic, fill=topic)) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_boxplot(alpha=0.7, show.legend=FALSE) +
facet_wrap(vars(Time_Bin)) +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma_time
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=5, width=8)
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.02))) +
scale_y_reordered() +
ggtitle("Top 10 Terms by Topic") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=9)
p_gamma <- ggplot(jamaica_gamma, aes(gamma, fill=as.factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_histogram(show.legend=FALSE, color="black") +
facet_wrap(~topic, ncol=3) +
geom_text(stat="bin", aes(label=ifelse(after_stat(count)>0, after_stat(count), "")), size=3, vjust=-0.5, family="Courier") +
labs(y="# of interviews") +
scale_y_continuous(expand=expansion(add=c(0, 2))) +
ggtitle("Per-Document, Per-Topic Probability Distribution") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma
p_gamma <- ggplot(jamaica_gamma, aes(gamma, fill=as.factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_histogram(show.legend=FALSE, color="black") +
facet_wrap(~topic, ncol=3) +
geom_text(stat="bin", aes(label=ifelse(after_stat(count)>0, after_stat(count), "")), size=3, vjust=-0.5, family="Courier") +
labs(y="# of interviews") +
scale_y_continuous(expand=expansion(add=c(0, 2))) +
ggtitle("Document-Topic Probability Distributions") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma
p_gamma_time <- jamaica_gamma %>%
left_join(relationship = "many-to-many", jamaica_df %>%
mutate(ID=as.character(ID)) %>%
select(Time_Bin, document=ID)) %>%
mutate(topic=factor(topic)) %>%
ggplot(aes(gamma, topic, fill=topic)) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_boxplot(alpha=0.7, show.legend=FALSE) +
facet_wrap(vars(Time_Bin)) +
ggtitle("Document-Topic Probability Distributions Over Time") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma_time
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=5, width=8)
p_topics
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.03))) +
scale_y_reordered() +
ggtitle("Top 10 Terms by Topic") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=9)
jamaica_dtm <- tidy_jamaica %>%
count(ID, word) %>%
filter(n>=3) %>%
cast_sparse(ID, word, n)
set.seed(123)
jamaica_stm <- stm(jamaica_dtm, K=6)
summary(jamaica_stm)
jamaica_topics <- tidy(jamaica_stm, matrix="beta")
jamaica_top_terms <- jamaica_topics %>%
group_by(topic) %>%
slice_max(beta, n=10) %>%
ungroup() %>%
arrange(topic, -beta)
p_topics <- jamaica_top_terms %>%
mutate(term=reorder_within(term, beta, topic)) %>%
ggplot(aes(beta, term, fill=factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_col(show.legend=FALSE, width=0.75) +
facet_wrap(~topic, scales="free") +
geom_text(aes(label=round(beta,2)), size=3, hjust=-0.1, family="Courier") +
scale_x_continuous(expand=expansion(add=c(0, 0.03))) +
scale_y_reordered() +
ggtitle("Top 10 Terms by Topic") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.ticks.x=element_blank(),
axis.text.x=element_blank(),
axis.text.y=element_text(size=10))
p_topics
ggsave(p_topics, filename=file.path(output, paste0("p_topics.svg")), height=5, width=8)
jamaica_gamma <- tidy(jamaica_stm,
matrix="gamma",
document_names=rownames(jamaica_dfm))
p_gamma <- ggplot(jamaica_gamma, aes(gamma, fill=as.factor(topic))) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_histogram(show.legend=FALSE, color="black") +
facet_wrap(~topic, ncol=3) +
geom_text(stat="bin", aes(label=ifelse(after_stat(count)>0, after_stat(count), "")), size=3, vjust=-0.5, family="Courier") +
labs(y="# of interviews") +
scale_y_continuous(expand=expansion(add=c(0, 2))) +
ggtitle("Document-Topic Probability Distributions") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma
ggsave(p_gamma, filename=file.path(output, paste0("p_gamma.svg")), height=5, width=8)
p_gamma_time <- jamaica_gamma %>%
left_join(relationship = "many-to-many", jamaica_df %>%
mutate(ID=as.character(ID)) %>%
select(Time_Bin, document=ID)) %>%
mutate(topic=factor(topic)) %>%
ggplot(aes(gamma, topic, fill=topic)) +
scale_fill_manual(values = rep(colorpal, length.out = 16)) +
geom_boxplot(alpha=0.7, show.legend=FALSE) +
facet_wrap(vars(Time_Bin)) +
ggtitle("Document-Topic Probability Distributions Over Time") +
theme(text=element_text(size=12, family="Courier"),
panel.background=element_rect(fill='white'),
axis.text.y=element_text(size=10))
p_gamma_time
ggsave(p_gamma_time, filename=file.path(output, paste0("p_gamma_time.svg")), height=5, width=8)
# Coherent system of packages for data manipulation, exploration and visualization.
install.packages("tidyverse")
library(tidyverse)
# Simple functions for examining and cleaning dirty data.
install.packages("janitor")
library(janitor)
# R package for displaying tables.
install.packages("gt")
library(gt)
# R package that applies the principles of the tidyverse to analyzing text.
install.packages("tidytext")
library(tidytext)
# Comprehensive framework for text mining and natural language processing (NLP) tasks.
install.packages("stm")
library(stm)
install.packages("quanteda")
library(quanteda)
# Provides basic infrastructure for fitting topic models based on data structures from the text mining package tm, specifically Latent Dirichlet Allocation (LDA) models and Correlated Topics Models (CTM), to textual data.
install.packages("topicmodels")
library(topicmodels)
# svglite is a graphic device that is capable of creating SVG files from R graphics.
install.packages('svglite')
library(svglite)
# R package for simplifying the composition and arrangement of multiple ggplot2 plots into a single, cohesive graphic.
install.packages("patchwork")
library(patchwork)
# COLOR PALETTE ####
colorpal <- c("#d6ba72", "#0484fb", "#1b7e24", "#c00f0a",
"#fbc500", "#1a64c2", "#7cc4a4", "#680514")
# STOP WORDS ####
my_stop_words <- tibble(word=c("jamaica","queens","neighborhood",
"street","avenue","block","boulevard",
"42nd","11","13",
"southeast",
"house","home",
"remember","time","day","lived",
"yeah","lot","started","moved","called",
"um","uh","constantly","whatnot","eventually","dah",
"xfriendx","xintervieweex",
"eighties","1970s","mid","1980s","1930s"
))
all_stop_words <- bind_rows(stop_words, my_stop_words)
# READING IN DATA ####
# Path to transcript data ----
path <- "/Users/randipparhar/Documents/RANDIP/capstone/analysis_website/data"
output <- "/Users/randipparhar/Documents/RANDIP/capstone/analysis_website/website_project/output/"
# Reading all transcripts into one data frame ----
pattern <- "*.csv"
file_list <- list.files(path, pattern, full.names=TRUE)
df <- readr::read_csv(file_list, id="file_name")
# DATA PREP ####
# Column names ----
names(df)
View(df)
# Dropping columns ----
# Note: Dropped Ancestry3 since the column had no values.
df <- df[,!names(df) %in% c("Ancestry3", "Time", "file_name")]
# Formatting date as date variable ----
df$datefmt <- as.Date(df$Date, format="%m/%d/%y")
# Extracting year-month ----
df$monthyear <- format(as.Date(df$datefmt), "%Y-%m")
# FILTER FOR JAMAICA ####
jamaica_df <- dplyr::filter(df, JamaicaYN=='Y' & Person=='Interviewee')
View(jamaica_df)
View(df)
